# This file was auto-generated by Fern from our API Definition.

from ..core.unchecked_base_model import UncheckedBaseModel
import typing
import pydantic
from .money import Money
from .order_service_charge_calculation_phase import OrderServiceChargeCalculationPhase
from .order_line_item_applied_tax import OrderLineItemAppliedTax
from .order_service_charge_treatment_type import OrderServiceChargeTreatmentType
from .order_service_charge_scope import OrderServiceChargeScope
from ..core.pydantic_utilities import IS_PYDANTIC_V2


class OrderReturnServiceCharge(UncheckedBaseModel):
    """
    Represents the service charge applied to the original order.
    """

    uid: typing.Optional[str] = pydantic.Field(default=None)
    """
    A unique ID that identifies the return service charge only within this order.
    """

    source_service_charge_uid: typing.Optional[str] = pydantic.Field(default=None)
    """
    The service charge `uid` from the order containing the original
    service charge. `source_service_charge_uid` is `null` for
    unlinked returns.
    """

    name: typing.Optional[str] = pydantic.Field(default=None)
    """
    The name of the service charge.
    """

    catalog_object_id: typing.Optional[str] = pydantic.Field(default=None)
    """
    The catalog object ID of the associated [OrderServiceCharge](entity:OrderServiceCharge).
    """

    catalog_version: typing.Optional[int] = pydantic.Field(default=None)
    """
    The version of the catalog object that this service charge references.
    """

    percentage: typing.Optional[str] = pydantic.Field(default=None)
    """
    The percentage of the service charge, as a string representation of
    a decimal number. For example, a value of `"7.25"` corresponds to a
    percentage of 7.25%.
    
    Either `percentage` or `amount_money` should be set, but not both.
    """

    amount_money: typing.Optional[Money] = pydantic.Field(default=None)
    """
    The amount of a non-percentage-based service charge.
    
    Either `percentage` or `amount_money` should be set, but not both.
    """

    applied_money: typing.Optional[Money] = pydantic.Field(default=None)
    """
    The amount of money applied to the order by the service charge, including
    any inclusive tax amounts, as calculated by Square.
    
    - For fixed-amount service charges, `applied_money` is equal to `amount_money`.
    - For percentage-based service charges, `applied_money` is the money calculated using the percentage.
    """

    total_money: typing.Optional[Money] = pydantic.Field(default=None)
    """
    The total amount of money to collect for the service charge.
    
    __NOTE__: If an inclusive tax is applied to the service charge, `total_money`
    does not equal `applied_money` plus `total_tax_money` because the inclusive
    tax amount is already included in both `applied_money` and `total_tax_money`.
    """

    total_tax_money: typing.Optional[Money] = pydantic.Field(default=None)
    """
    The total amount of tax money to collect for the service charge.
    """

    calculation_phase: typing.Optional[OrderServiceChargeCalculationPhase] = pydantic.Field(default=None)
    """
    The calculation phase after which to apply the service charge.
    See [OrderServiceChargeCalculationPhase](#type-orderservicechargecalculationphase) for possible values
    """

    taxable: typing.Optional[bool] = pydantic.Field(default=None)
    """
    Indicates whether the surcharge can be taxed. Service charges
    calculated in the `TOTAL_PHASE` cannot be marked as taxable.
    """

    applied_taxes: typing.Optional[typing.List[OrderLineItemAppliedTax]] = pydantic.Field(default=None)
    """
    The list of references to `OrderReturnTax` entities applied to the
    `OrderReturnServiceCharge`. Each `OrderLineItemAppliedTax` has a `tax_uid`
    that references the `uid` of a top-level `OrderReturnTax` that is being
    applied to the `OrderReturnServiceCharge`. On reads, the applied amount is
    populated.
    """

    treatment_type: typing.Optional[OrderServiceChargeTreatmentType] = pydantic.Field(default=None)
    """
    The treatment type of the service charge.
    See [OrderServiceChargeTreatmentType](#type-orderservicechargetreatmenttype) for possible values
    """

    scope: typing.Optional[OrderServiceChargeScope] = pydantic.Field(default=None)
    """
    Indicates the level at which the apportioned service charge applies. For `ORDER`
    scoped service charges, Square generates references in `applied_service_charges` on
    all order line items that do not have them. For `LINE_ITEM` scoped service charges,
    the service charge only applies to line items with a service charge reference in their
    `applied_service_charges` field.
    
    This field is immutable. To change the scope of an apportioned service charge, you must delete
    the apportioned service charge and re-add it as a new apportioned service charge.
    See [OrderServiceChargeScope](#type-orderservicechargescope) for possible values
    """

    if IS_PYDANTIC_V2:
        model_config: typing.ClassVar[pydantic.ConfigDict] = pydantic.ConfigDict(extra="allow", frozen=True)  # type: ignore # Pydantic v2
    else:

        class Config:
            frozen = True
            smart_union = True
            extra = pydantic.Extra.allow
