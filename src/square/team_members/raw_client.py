# This file was auto-generated by Fern from our API Definition.

import typing
from json.decoder import JSONDecodeError

from ..core.api_error import ApiError
from ..core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ..core.http_response import AsyncHttpResponse, HttpResponse
from ..core.jsonable_encoder import jsonable_encoder
from ..core.request_options import RequestOptions
from ..core.serialization import convert_and_respect_annotation_metadata
from ..core.unchecked_base_model import construct_type
from ..requests.create_team_member_request import CreateTeamMemberRequestParams
from ..requests.search_team_members_query import SearchTeamMembersQueryParams
from ..requests.team_member import TeamMemberParams
from ..requests.update_team_member_request import UpdateTeamMemberRequestParams
from ..types.batch_create_team_members_response import BatchCreateTeamMembersResponse
from ..types.batch_update_team_members_response import BatchUpdateTeamMembersResponse
from ..types.create_team_member_response import CreateTeamMemberResponse
from ..types.get_team_member_response import GetTeamMemberResponse
from ..types.search_team_members_response import SearchTeamMembersResponse
from ..types.update_team_member_response import UpdateTeamMemberResponse

# this is used as the default value for optional parameters
OMIT = typing.cast(typing.Any, ...)


class RawTeamMembersClient:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._client_wrapper = client_wrapper

    def create(
        self,
        *,
        idempotency_key: typing.Optional[str] = OMIT,
        team_member: typing.Optional[TeamMemberParams] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> HttpResponse[CreateTeamMemberResponse]:
        """
        Creates a single `TeamMember` object. The `TeamMember` object is returned on successful creates.
        You must provide the following values in your request to this endpoint:
        - `given_name`
        - `family_name`

        Learn about [Troubleshooting the Team API](https://developer.squareup.com/docs/team/troubleshooting#createteammember).

        Parameters
        ----------
        idempotency_key : typing.Optional[str]
            A unique string that identifies this `CreateTeamMember` request.
            Keys can be any valid string, but must be unique for every request.
            For more information, see [Idempotency](https://developer.squareup.com/docs/build-basics/common-api-patterns/idempotency).

            The minimum length is 1 and the maximum length is 45.

        team_member : typing.Optional[TeamMemberParams]
            **Required** The data used to create the `TeamMember` object. If you include `wage_setting`, you must provide
            `job_id` for each job assignment. To get job IDs, call [ListJobs](api-endpoint:Team-ListJobs).

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        HttpResponse[CreateTeamMemberResponse]
            Success
        """
        _response = self._client_wrapper.httpx_client.request(
            "v2/team-members",
            method="POST",
            json={
                "idempotency_key": idempotency_key,
                "team_member": convert_and_respect_annotation_metadata(
                    object_=team_member, annotation=TeamMemberParams, direction="write"
                ),
            },
            headers={
                "content-type": "application/json",
            },
            request_options=request_options,
            omit=OMIT,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    CreateTeamMemberResponse,
                    construct_type(
                        type_=CreateTeamMemberResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return HttpResponse(response=_response, data=_data)
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    def batch_create(
        self,
        *,
        team_members: typing.Dict[str, CreateTeamMemberRequestParams],
        request_options: typing.Optional[RequestOptions] = None,
    ) -> HttpResponse[BatchCreateTeamMembersResponse]:
        """
        Creates multiple `TeamMember` objects. The created `TeamMember` objects are returned on successful creates.
        This process is non-transactional and processes as much of the request as possible. If one of the creates in
        the request cannot be successfully processed, the request is not marked as failed, but the body of the response
        contains explicit error information for the failed create.

        Learn about [Troubleshooting the Team API](https://developer.squareup.com/docs/team/troubleshooting#bulk-create-team-members).

        Parameters
        ----------
        team_members : typing.Dict[str, CreateTeamMemberRequestParams]
            The data used to create the `TeamMember` objects. Each key is the `idempotency_key` that maps to the `CreateTeamMemberRequest`.
            The maximum number of create objects is 25.

            If you include a team member's `wage_setting`, you must provide `job_id` for each job assignment. To get job IDs,
            call [ListJobs](api-endpoint:Team-ListJobs).

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        HttpResponse[BatchCreateTeamMembersResponse]
            Success
        """
        _response = self._client_wrapper.httpx_client.request(
            "v2/team-members/bulk-create",
            method="POST",
            json={
                "team_members": convert_and_respect_annotation_metadata(
                    object_=team_members, annotation=typing.Dict[str, CreateTeamMemberRequestParams], direction="write"
                ),
            },
            headers={
                "content-type": "application/json",
            },
            request_options=request_options,
            omit=OMIT,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    BatchCreateTeamMembersResponse,
                    construct_type(
                        type_=BatchCreateTeamMembersResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return HttpResponse(response=_response, data=_data)
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    def batch_update(
        self,
        *,
        team_members: typing.Dict[str, UpdateTeamMemberRequestParams],
        request_options: typing.Optional[RequestOptions] = None,
    ) -> HttpResponse[BatchUpdateTeamMembersResponse]:
        """
        Updates multiple `TeamMember` objects. The updated `TeamMember` objects are returned on successful updates.
        This process is non-transactional and processes as much of the request as possible. If one of the updates in
        the request cannot be successfully processed, the request is not marked as failed, but the body of the response
        contains explicit error information for the failed update.
        Learn about [Troubleshooting the Team API](https://developer.squareup.com/docs/team/troubleshooting#bulk-update-team-members).

        Parameters
        ----------
        team_members : typing.Dict[str, UpdateTeamMemberRequestParams]
            The data used to update the `TeamMember` objects. Each key is the `team_member_id` that maps to the `UpdateTeamMemberRequest`.
            The maximum number of update objects is 25.

            For each team member, include the fields to add, change, or clear. Fields can be cleared using a null value.
            To update `wage_setting.job_assignments`, you must provide the complete list of job assignments. If needed,
            call [ListJobs](api-endpoint:Team-ListJobs) to get the required `job_id` values.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        HttpResponse[BatchUpdateTeamMembersResponse]
            Success
        """
        _response = self._client_wrapper.httpx_client.request(
            "v2/team-members/bulk-update",
            method="POST",
            json={
                "team_members": convert_and_respect_annotation_metadata(
                    object_=team_members, annotation=typing.Dict[str, UpdateTeamMemberRequestParams], direction="write"
                ),
            },
            headers={
                "content-type": "application/json",
            },
            request_options=request_options,
            omit=OMIT,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    BatchUpdateTeamMembersResponse,
                    construct_type(
                        type_=BatchUpdateTeamMembersResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return HttpResponse(response=_response, data=_data)
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    def search(
        self,
        *,
        query: typing.Optional[SearchTeamMembersQueryParams] = OMIT,
        limit: typing.Optional[int] = OMIT,
        cursor: typing.Optional[str] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> HttpResponse[SearchTeamMembersResponse]:
        """
        Returns a paginated list of `TeamMember` objects for a business.
        The list can be filtered by location IDs, `ACTIVE` or `INACTIVE` status, or whether
        the team member is the Square account owner.

        Parameters
        ----------
        query : typing.Optional[SearchTeamMembersQueryParams]
            The query parameters.

        limit : typing.Optional[int]
            The maximum number of `TeamMember` objects in a page (100 by default).

        cursor : typing.Optional[str]
            The opaque cursor for fetching the next page. For more information, see
            [pagination](https://developer.squareup.com/docs/working-with-apis/pagination).

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        HttpResponse[SearchTeamMembersResponse]
            Success
        """
        _response = self._client_wrapper.httpx_client.request(
            "v2/team-members/search",
            method="POST",
            json={
                "query": convert_and_respect_annotation_metadata(
                    object_=query, annotation=SearchTeamMembersQueryParams, direction="write"
                ),
                "limit": limit,
                "cursor": cursor,
            },
            headers={
                "content-type": "application/json",
            },
            request_options=request_options,
            omit=OMIT,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    SearchTeamMembersResponse,
                    construct_type(
                        type_=SearchTeamMembersResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return HttpResponse(response=_response, data=_data)
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    def get(
        self, team_member_id: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> HttpResponse[GetTeamMemberResponse]:
        """
        Retrieves a `TeamMember` object for the given `TeamMember.id`.
        Learn about [Troubleshooting the Team API](https://developer.squareup.com/docs/team/troubleshooting#retrieve-a-team-member).

        Parameters
        ----------
        team_member_id : str
            The ID of the team member to retrieve.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        HttpResponse[GetTeamMemberResponse]
            Success
        """
        _response = self._client_wrapper.httpx_client.request(
            f"v2/team-members/{jsonable_encoder(team_member_id)}",
            method="GET",
            request_options=request_options,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    GetTeamMemberResponse,
                    construct_type(
                        type_=GetTeamMemberResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return HttpResponse(response=_response, data=_data)
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    def update(
        self,
        team_member_id: str,
        *,
        team_member: typing.Optional[TeamMemberParams] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> HttpResponse[UpdateTeamMemberResponse]:
        """
        Updates a single `TeamMember` object. The `TeamMember` object is returned on successful updates.
        Learn about [Troubleshooting the Team API](https://developer.squareup.com/docs/team/troubleshooting#update-a-team-member).

        Parameters
        ----------
        team_member_id : str
            The ID of the team member to update.

        team_member : typing.Optional[TeamMemberParams]
            The team member fields to add, change, or clear. Fields can be cleared using a null value. To update
            `wage_setting.job_assignments`, you must provide the complete list of job assignments. If needed, call
            [ListJobs](api-endpoint:Team-ListJobs) to get the required `job_id` values.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        HttpResponse[UpdateTeamMemberResponse]
            Success
        """
        _response = self._client_wrapper.httpx_client.request(
            f"v2/team-members/{jsonable_encoder(team_member_id)}",
            method="PUT",
            json={
                "team_member": convert_and_respect_annotation_metadata(
                    object_=team_member, annotation=TeamMemberParams, direction="write"
                ),
            },
            headers={
                "content-type": "application/json",
            },
            request_options=request_options,
            omit=OMIT,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    UpdateTeamMemberResponse,
                    construct_type(
                        type_=UpdateTeamMemberResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return HttpResponse(response=_response, data=_data)
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)


class AsyncRawTeamMembersClient:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._client_wrapper = client_wrapper

    async def create(
        self,
        *,
        idempotency_key: typing.Optional[str] = OMIT,
        team_member: typing.Optional[TeamMemberParams] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AsyncHttpResponse[CreateTeamMemberResponse]:
        """
        Creates a single `TeamMember` object. The `TeamMember` object is returned on successful creates.
        You must provide the following values in your request to this endpoint:
        - `given_name`
        - `family_name`

        Learn about [Troubleshooting the Team API](https://developer.squareup.com/docs/team/troubleshooting#createteammember).

        Parameters
        ----------
        idempotency_key : typing.Optional[str]
            A unique string that identifies this `CreateTeamMember` request.
            Keys can be any valid string, but must be unique for every request.
            For more information, see [Idempotency](https://developer.squareup.com/docs/build-basics/common-api-patterns/idempotency).

            The minimum length is 1 and the maximum length is 45.

        team_member : typing.Optional[TeamMemberParams]
            **Required** The data used to create the `TeamMember` object. If you include `wage_setting`, you must provide
            `job_id` for each job assignment. To get job IDs, call [ListJobs](api-endpoint:Team-ListJobs).

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AsyncHttpResponse[CreateTeamMemberResponse]
            Success
        """
        _response = await self._client_wrapper.httpx_client.request(
            "v2/team-members",
            method="POST",
            json={
                "idempotency_key": idempotency_key,
                "team_member": convert_and_respect_annotation_metadata(
                    object_=team_member, annotation=TeamMemberParams, direction="write"
                ),
            },
            headers={
                "content-type": "application/json",
            },
            request_options=request_options,
            omit=OMIT,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    CreateTeamMemberResponse,
                    construct_type(
                        type_=CreateTeamMemberResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return AsyncHttpResponse(response=_response, data=_data)
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    async def batch_create(
        self,
        *,
        team_members: typing.Dict[str, CreateTeamMemberRequestParams],
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AsyncHttpResponse[BatchCreateTeamMembersResponse]:
        """
        Creates multiple `TeamMember` objects. The created `TeamMember` objects are returned on successful creates.
        This process is non-transactional and processes as much of the request as possible. If one of the creates in
        the request cannot be successfully processed, the request is not marked as failed, but the body of the response
        contains explicit error information for the failed create.

        Learn about [Troubleshooting the Team API](https://developer.squareup.com/docs/team/troubleshooting#bulk-create-team-members).

        Parameters
        ----------
        team_members : typing.Dict[str, CreateTeamMemberRequestParams]
            The data used to create the `TeamMember` objects. Each key is the `idempotency_key` that maps to the `CreateTeamMemberRequest`.
            The maximum number of create objects is 25.

            If you include a team member's `wage_setting`, you must provide `job_id` for each job assignment. To get job IDs,
            call [ListJobs](api-endpoint:Team-ListJobs).

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AsyncHttpResponse[BatchCreateTeamMembersResponse]
            Success
        """
        _response = await self._client_wrapper.httpx_client.request(
            "v2/team-members/bulk-create",
            method="POST",
            json={
                "team_members": convert_and_respect_annotation_metadata(
                    object_=team_members, annotation=typing.Dict[str, CreateTeamMemberRequestParams], direction="write"
                ),
            },
            headers={
                "content-type": "application/json",
            },
            request_options=request_options,
            omit=OMIT,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    BatchCreateTeamMembersResponse,
                    construct_type(
                        type_=BatchCreateTeamMembersResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return AsyncHttpResponse(response=_response, data=_data)
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    async def batch_update(
        self,
        *,
        team_members: typing.Dict[str, UpdateTeamMemberRequestParams],
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AsyncHttpResponse[BatchUpdateTeamMembersResponse]:
        """
        Updates multiple `TeamMember` objects. The updated `TeamMember` objects are returned on successful updates.
        This process is non-transactional and processes as much of the request as possible. If one of the updates in
        the request cannot be successfully processed, the request is not marked as failed, but the body of the response
        contains explicit error information for the failed update.
        Learn about [Troubleshooting the Team API](https://developer.squareup.com/docs/team/troubleshooting#bulk-update-team-members).

        Parameters
        ----------
        team_members : typing.Dict[str, UpdateTeamMemberRequestParams]
            The data used to update the `TeamMember` objects. Each key is the `team_member_id` that maps to the `UpdateTeamMemberRequest`.
            The maximum number of update objects is 25.

            For each team member, include the fields to add, change, or clear. Fields can be cleared using a null value.
            To update `wage_setting.job_assignments`, you must provide the complete list of job assignments. If needed,
            call [ListJobs](api-endpoint:Team-ListJobs) to get the required `job_id` values.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AsyncHttpResponse[BatchUpdateTeamMembersResponse]
            Success
        """
        _response = await self._client_wrapper.httpx_client.request(
            "v2/team-members/bulk-update",
            method="POST",
            json={
                "team_members": convert_and_respect_annotation_metadata(
                    object_=team_members, annotation=typing.Dict[str, UpdateTeamMemberRequestParams], direction="write"
                ),
            },
            headers={
                "content-type": "application/json",
            },
            request_options=request_options,
            omit=OMIT,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    BatchUpdateTeamMembersResponse,
                    construct_type(
                        type_=BatchUpdateTeamMembersResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return AsyncHttpResponse(response=_response, data=_data)
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    async def search(
        self,
        *,
        query: typing.Optional[SearchTeamMembersQueryParams] = OMIT,
        limit: typing.Optional[int] = OMIT,
        cursor: typing.Optional[str] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AsyncHttpResponse[SearchTeamMembersResponse]:
        """
        Returns a paginated list of `TeamMember` objects for a business.
        The list can be filtered by location IDs, `ACTIVE` or `INACTIVE` status, or whether
        the team member is the Square account owner.

        Parameters
        ----------
        query : typing.Optional[SearchTeamMembersQueryParams]
            The query parameters.

        limit : typing.Optional[int]
            The maximum number of `TeamMember` objects in a page (100 by default).

        cursor : typing.Optional[str]
            The opaque cursor for fetching the next page. For more information, see
            [pagination](https://developer.squareup.com/docs/working-with-apis/pagination).

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AsyncHttpResponse[SearchTeamMembersResponse]
            Success
        """
        _response = await self._client_wrapper.httpx_client.request(
            "v2/team-members/search",
            method="POST",
            json={
                "query": convert_and_respect_annotation_metadata(
                    object_=query, annotation=SearchTeamMembersQueryParams, direction="write"
                ),
                "limit": limit,
                "cursor": cursor,
            },
            headers={
                "content-type": "application/json",
            },
            request_options=request_options,
            omit=OMIT,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    SearchTeamMembersResponse,
                    construct_type(
                        type_=SearchTeamMembersResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return AsyncHttpResponse(response=_response, data=_data)
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    async def get(
        self, team_member_id: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> AsyncHttpResponse[GetTeamMemberResponse]:
        """
        Retrieves a `TeamMember` object for the given `TeamMember.id`.
        Learn about [Troubleshooting the Team API](https://developer.squareup.com/docs/team/troubleshooting#retrieve-a-team-member).

        Parameters
        ----------
        team_member_id : str
            The ID of the team member to retrieve.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AsyncHttpResponse[GetTeamMemberResponse]
            Success
        """
        _response = await self._client_wrapper.httpx_client.request(
            f"v2/team-members/{jsonable_encoder(team_member_id)}",
            method="GET",
            request_options=request_options,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    GetTeamMemberResponse,
                    construct_type(
                        type_=GetTeamMemberResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return AsyncHttpResponse(response=_response, data=_data)
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    async def update(
        self,
        team_member_id: str,
        *,
        team_member: typing.Optional[TeamMemberParams] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AsyncHttpResponse[UpdateTeamMemberResponse]:
        """
        Updates a single `TeamMember` object. The `TeamMember` object is returned on successful updates.
        Learn about [Troubleshooting the Team API](https://developer.squareup.com/docs/team/troubleshooting#update-a-team-member).

        Parameters
        ----------
        team_member_id : str
            The ID of the team member to update.

        team_member : typing.Optional[TeamMemberParams]
            The team member fields to add, change, or clear. Fields can be cleared using a null value. To update
            `wage_setting.job_assignments`, you must provide the complete list of job assignments. If needed, call
            [ListJobs](api-endpoint:Team-ListJobs) to get the required `job_id` values.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AsyncHttpResponse[UpdateTeamMemberResponse]
            Success
        """
        _response = await self._client_wrapper.httpx_client.request(
            f"v2/team-members/{jsonable_encoder(team_member_id)}",
            method="PUT",
            json={
                "team_member": convert_and_respect_annotation_metadata(
                    object_=team_member, annotation=TeamMemberParams, direction="write"
                ),
            },
            headers={
                "content-type": "application/json",
            },
            request_options=request_options,
            omit=OMIT,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    UpdateTeamMemberResponse,
                    construct_type(
                        type_=UpdateTeamMemberResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return AsyncHttpResponse(response=_response, data=_data)
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)
